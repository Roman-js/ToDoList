(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(t,e,n){},28:function(t,e,n){t.exports=n(57)},33:function(t,e,n){},57:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),i=n(10),r=n.n(i),s=(n(33),n(1)),c=n(7),l=n(3),d=n(2),u=n(4),p=(n(16),n(5)),f=n(8),T=n(14),h=n(26),m=n.n(h).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/todo-lists/",withCredentials:!0,headers:{"API-KEY":"0c05e3f5-1bb0-4c63-a612-ce4b6957f3bd"}}),k=function(t,e){return m.post("".concat(e,"/tasks"),{title:t})},b=function(t){return m.post("",{title:t})},C=function(){return m.get("")},O=function(t){return m.get("".concat(t,"/tasks"))},v=function(t){return m.delete("".concat(t))},E=function(t,e,n){return m.put("".concat(t,"/tasks/").concat(e),n)},j=function(t,e){return m.delete("".concat(t,"/tasks/").concat(e))},g=function(t,e){return m.put("".concat(t),{title:e})},L="TodoList/Reducer/ADD-TASK",I={todolists:[]},S=function(t,e){return{type:"TodoList/Reducer/CHANGE-TITLE-TODOLIST",todolistId:t,newTitle:e}},A=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"TodoList/Reducer/ADD-TODOLIST":return Object(p.a)({},t,{todolists:[].concat(Object(T.a)(t.todolists),[e.newTodolist])});case L:return Object(p.a)({},t,{todolists:t.todolists.map(function(t){return t.id===e.todoListId?Object(p.a)({},t,{tasks:[].concat(Object(T.a)(t.tasks),[e.newTask])}):t})});case"TodoList/Reducer/CHANGE-TASK":return Object(p.a)({},t,{todolists:t.todolists.map(function(t){return t.id===e.todoListId?Object(p.a)({},t,{tasks:t.tasks.map(function(t){return t.id!==e.taskId?t:Object(p.a)({},t,{},e.obj)})}):t})});case"TodoList/Reducer/CHANGE-TITLE-TODOLIST":return Object(p.a)({},t,{todolists:t.todolists.map(function(t){return t.id===e.todolistId?Object(p.a)({},t,{title:e.newTitle}):t})});case"TodoList/Reducer/DELETE-TODOLIST":return Object(p.a)({},t,{todolists:t.todolists.filter(function(t){return t.id!==e.todoListId})});case"TodoList/Reducer/DELETE-TASK":return Object(p.a)({},t,{todolists:t.todolists.map(function(t){return t.id!==e.todoListId?t:Object(p.a)({},t,{tasks:t.tasks.filter(function(t){return t.id!==e.taskId})})})});case"TodoList/Reducer/SET-TODOLIST":return Object(p.a)({},t,{todolists:e.todolists.map(function(t){return Object(p.a)({},t,{tasks:[]})})});case"TodoList/Reducer/SET-TASKS":return Object(p.a)({},t,{todolists:t.todolists.map(function(t){return t.id===e.todolistId?Object(p.a)({},t,{tasks:e.tasks}):t})})}return t},y=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(l.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(i)))).state={editMode:!1,title:n.props.task.title},n.activateEditMode=function(){n.setState({editMode:!0})},n.deactivateEditMode=function(){n.setState({editMode:!1}),n.props.changeTitle(n.props.task.id,n.state.title)},n.onIsDoneChanged=function(t){var e=t.currentTarget.checked?2:0;n.props.changeStatus(n.props.task.id,e)},n.onTitleChanged=function(t){n.setState({title:t.currentTarget.value})},n.deleteTask=function(){n.props.deleteTaskTC(n.props.todoListId,n.props.task.id)},n.render=function(){var t=2===n.props.task.status?"todoList-task done":"todoList-task";return o.a.createElement("div",{className:"todoList-tasks"},o.a.createElement("div",{className:t},o.a.createElement("input",{type:"checkbox",checked:2===n.props.task.status,onChange:n.onIsDoneChanged}),n.state.editMode?o.a.createElement("input",{value:n.state.title,autoFocus:!0,onChange:n.onTitleChanged,onBlur:n.deactivateEditMode}):o.a.createElement("span",{onClick:n.activateEditMode},n.props.task.title," ",n.props.priority),o.a.createElement("button",{onClick:n.deleteTask},"X")))},n}return Object(u.a)(e,t),e}(o.a.Component),w=Object(f.b)(function(t){return{todolists:t.todolist.todolists}},{deleteTaskTC:function(t,e){return function(n){j(t,e).then(function(a){0===a.data.resultCode&&n(function(t,e){return{type:"TodoList/Reducer/DELETE-TASK",taskId:t,todoListId:e}}(e,t))})}}})(y),F=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(l.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(i)))).render=function(){var t=n.props.tasks.map(function(t){return o.a.createElement(w,{task:t,title:t.title,isDone:t.status,priority:t.priority,changeStatus:n.props.changeStatus,changeTitle:n.props.changeTitle,todoListId:n.props.todoListId})});return o.a.createElement("div",{className:"todoList-tasks"},t)},n}return Object(u.a)(e,t),e}(o.a.Component),D=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(l.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(i)))).render=function(){return o.a.createElement("button",{onClick:n.props.onClickFn,className:n.props.btnClass},n.props.title)},n}return Object(u.a)(e,t),e}(o.a.Component),M=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(l.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(i)))).state={isHidden:!1},n.onAllFilterClick=function(){n.props.changeFilter("All")},n.onCompletedFilterClick=function(){n.props.changeFilter("Completed")},n.onActiveFilterClick=function(){n.props.changeFilter("Active")},n.onShowFiltersClick=function(){n.setState({isHidden:!0})},n.onHideFiltersClick=function(){n.setState({isHidden:!1})},n.render=function(){var t="All"===n.props.filterValue?"filter-active":"",e="Completed"===n.props.filterValue?"filter-active":"",a="Active"===n.props.filterValue?"filter-active":"";return o.a.createElement("div",{className:"todoList-footer"},!n.state.isHidden&&o.a.createElement(o.a.Fragment,null,o.a.createElement(D,{title:"All",btnClass:t,onClickFn:n.onAllFilterClick}),o.a.createElement(D,{title:"Completed",btnClass:e,onClickFn:n.onCompletedFilterClick}),o.a.createElement(D,{title:"Active",btnClass:a,onClickFn:n.onActiveFilterClick})),!n.state.isHidden&&o.a.createElement("span",{onClick:function(){n.setState({isHidden:!0})}},"Hide"),n.state.isHidden&&o.a.createElement("span",{onClick:function(){n.setState({isHidden:!1})}},"Show"))},n}return Object(u.a)(e,t),e}(o.a.Component),N=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(l.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(o)))).state={error:!1,title:""},n.onAddItemClick=function(){var t=n.state.title;n.setState({title:""}),""===t?n.setState({error:!0}):(n.setState({error:!1}),n.props.addItem(t))},n.onTitleChanged=function(t){var e=t.currentTarget.value;n.setState({error:!1,title:e})},n.onAddItemEnterPress=function(t){"Enter"===t.key&&n.onAddItemClick()},n}return Object(u.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this.state.error?"error":"";return o.a.createElement("div",{className:"NewItemForm"},o.a.createElement("input",{value:this.state.title,onChange:this.onTitleChanged,className:t,type:"text",placeholder:"New Item name",onKeyPress:this.onAddItemEnterPress}),o.a.createElement("button",{onClick:this.onAddItemClick},"Add"))}}]),e}(o.a.Component),R=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(l.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(o)))).state={editMode:!1,currentTitle:n.props.title},n.activeMode=function(){n.setState({editMode:!0})},n.deactivateEditMode=function(){n.setState({editMode:!1}),n.props.changeTitleTC(n.props.todoListId,n.state.currentTitle)},n.titleChanged=function(t){n.setState({currentTitle:t.currentTarget.value})},n}return Object(u.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,this.state.editMode?o.a.createElement("input",{onBlur:this.deactivateEditMode,autoFocus:!0,value:this.state.currentTitle,onChange:this.titleChanged}):o.a.createElement("h3",{onClick:this.activeMode,className:"todoList-header__title"},this.props.title,o.a.createElement("button",{onClick:this.props.deleteTodolist},"X")))}}]),e}(o.a.Component),H=function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(R,{title:this.props.title,deleteTodolist:this.props.deleteTodolist,todoListId:this.props.todoListId,changeTitleTC:this.props.changeTitleTC}),o.a.createElement(N,{addItem:this.props.addItem}))}}]),e}(o.a.Component),V=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(l.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(i)))).state={tasks:[],filterValue:"All"},n.restoreState=function(){n.props.loadTasksThunk(n.props.id)},n.deleteTodolist=function(){n.props.deleteTodolistTC(n.props.id)},n.changeTask=function(t,e){var a=n.props.tasks.find(function(e){return e.id===t}),o=Object(p.a)({},a,{},e);n.props.changeTaskTC(n.props.id,t,o,e)},n.changeStatus=function(t,e){n.changeTask(t,{status:e})},n.changeTitle=function(t,e){n.changeTask(t,{title:e})},n.changeFilter=function(t){n.setState({filterValue:t})},n.addTask=function(t){n.props.addTaskTC(t,n.props.id)},n.render=function(){var t=n.props.tasks,e=void 0===t?[]:t;return o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"todoList"},o.a.createElement("div",null,o.a.createElement(H,{addItem:n.addTask,title:n.props.title,deleteTodolist:n.deleteTodolist,todoListId:n.props.id,changeTitleTC:n.props.changeTitleTC})),o.a.createElement(F,{changeTitle:n.changeTitle,changeStatus:n.changeStatus,tasks:e.filter(function(t){return"All"===n.state.filterValue||("Active"===n.state.filterValue?0===t.status:"Completed"===n.state.filterValue?2===t.status:void 0)}),todoListId:n.props.id}),o.a.createElement(M,{filterValue:n.state.filterValue,changeFilter:n.changeFilter})))},n}return Object(u.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.restoreState()}}]),e}(o.a.Component),K=Object(f.b)(null,{changeTitleTodolist:S,loadTasksThunk:function(t){return function(e){return O(t).then(function(n){var a=n.data.items;e(function(t,e){return{type:"TodoList/Reducer/SET-TASKS",todolistId:e,tasks:t}}(a,t))})}},deleteTodolistTC:function(t){return function(e){v(t).then(function(n){0===n.data.resultCode&&e(function(t){return{type:"TodoList/Reducer/DELETE-TODOLIST",todoListId:t}}(t))})}},changeTaskTC:function(t,e,n,a){return function(a){E(t,e,n).then(function(n){if(0===n.data.resultCode){var o=n.data.data.item;a(function(t,e,n){return{type:"TodoList/Reducer/CHANGE-TASK",obj:t,taskId:e,todoListId:n}}(o,t,e))}}).catch(function(t){})}},addTaskTC:function(t,e){return function(n){k(t,e).then(function(t){0===t.data.resultCode&&n(function(t,e){return{type:L,newTask:t,todoListId:e}}(t.data.data.item,e))})}},changeTitleTC:function(t,e){return function(n){g(t,e).then(function(a){0===a.data.resultCode&&n(S(t,e))})}}})(V),B=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(l.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(i)))).state={todolists:[]},n.restoreState=function(){n.props.restoreTodolistTC()},n.addTodolist=function(t){n.props.addTodolistTC(t)},n.render=function(){var t=n.props.todolists.map(function(t){return o.a.createElement(K,{id:t.id,title:t.title,tasks:t.tasks})});return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,o.a.createElement(N,{addItem:n.addTodolist})),o.a.createElement("div",{className:"App"},t))},n}return Object(u.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.restoreState()}}]),e}(o.a.Component),G=Object(f.b)(function(t){return{todolists:t.todolist.todolists}},{addTodolistTC:function(t){return function(e){b(t).then(function(t){var n=t.data.data.item;e({type:"TodoList/Reducer/ADD-TODOLIST",newTodolist:n})})}},restoreTodolistTC:function(){return function(t){C().then(function(e){t({type:"TodoList/Reducer/SET-TODOLIST",todolists:e.data})})}}})(B);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=n(9),x=n(27),J=Object(P.c)({todolist:A}),W=Object(P.d)(J,Object(P.a)(x.a));r.a.render(o.a.createElement(f.a,{store:W},o.a.createElement(G,{todolists:[]})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[28,1,2]]]);
//# sourceMappingURL=main.a6aac2fa.chunk.js.map